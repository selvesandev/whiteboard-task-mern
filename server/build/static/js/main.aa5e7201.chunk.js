(this["webpackJsonpwhiteboard-task-mern"]=this["webpackJsonpwhiteboard-task-mern"]||[]).push([[0],{32:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=n.n(c),s=(n(32),n(5)),i=n(9),u=n(4),l=n(13),d=n(3),p=n.n(d),v=n(8),f=n(11),h=n.n(f);h.a.defaults.baseURL="/api",h.a.defaults.headers.post["Content-Type"]="application/json",h.a.interceptors.response.use((function(e){return e}),(function(e){return e.response&&e.response.data&&e.response.status,Promise.reject(e)}));var j=function(e){var t=e.url,n=e.params;return new Promise((function(e,a){var r={method:"GET",url:t,params:n};return e(h()(r))}))},b=function(e){var t=e.url,n=e.data,a=e.params;return new Promise((function(e,r){var c={method:"POST",url:t,data:n,params:a,headers:{}};return e(h()(c))}))},g=function(e){var t=e.url,n=e.data,a=e.params;return new Promise((function(e,r){var c={method:"PUT",url:t,data:n,params:a,headers:{}};return e(h()(c))}))},O=function(e){var t=e.url,n=e.data,a=e.params,r=void 0===a?{}:a;return new Promise((function(e,a){var c={method:"DELETE",url:t,data:n,params:r,headers:{}};return e(h()(c))}))},m=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*a));return t},x="CATEOGRY_GENERAL_STATE",y="CATEGORY_TASK_REORDER_STATIC",w="CATEGORY_TASK_UPDATE_STATIC",k="CATEGORY_TASK_DELETE_STATIC",E="CATEGORY_CREATE_STATIC",_="TASK_GENERAL_STATE",T=function(e){var t=e.props,n=e.value,a=e.deep;return{type:x,payload:{props:t,value:n,deep:a}}},C=function(){return function(){var e=Object(v.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(T({props:"fetching",value:!0})),e.next=4,j({url:"/category"});case 4:n=e.sent,t(T({props:"data",value:n.data.data})),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),Error(e.t0);case 11:return e.prev=11,t(T({props:"fetching",value:!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()},S=function(e){var t=e.props,n=e.value,a=e.deep;return{type:_,payload:{props:t,value:n,deep:a}}},N=function(e){var t=e.id,n=e.svg_events,a=e.mode,r=void 0===a?"CREATE":a;return function(){var e=Object(v.a)(p.a.mark((function e(a){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(S({props:"saving",value:!0})),a({type:w,payload:{id:t,svg_events:n}}),e.next=5,g({url:"/task/".concat(t),data:{svg_events:n},params:{mode:r}});case 5:return c=e.sent,e.abrupt("return",c);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0);case 12:return e.prev=12,a(S({props:"saving",value:!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}()},A=n(1),R=function(e){var t=e.height,n=void 0===t?100:t,a=e.width,r=void 0===a?100:a,c=e.color,o=void 0===c?"#fff":c,s=e.isFullScreen,i=void 0!==s&&s;return Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{className:"loader "+(i?"full_screen":""),children:Object(A.jsx)("svg",{style:{width:r,height:n},version:"1.1",id:"L9",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",children:Object(A.jsx)("path",{fill:o,d:"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50",children:Object(A.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})})})}),i?Object(A.jsx)("div",{className:"bg",onClick:function(e){}}):null]})},D=function(e){var t=e.value,n=e.onBlur,a=e.placeholder,r=e.onChange,c=e.loading;return Object(A.jsxs)("div",{className:"input_container",children:[Object(A.jsx)("input",{type:"text",className:"input_element",placeholder:a,autoFocus:!0,onFocus:function(e){e.target.select()},value:t,onBlur:n,onChange:function(e){r&&r(e.target.value)}}),c?Object(A.jsx)(R,{height:40,width:40,color:"#4caf50"}):null]})},P=function(e){var t=e.category,n=e.selectCategory,r=e.children,c=e.mode,o=void 0===c?"edit":c,s=e.onBlur,l=e.onSave,d=Object(a.useState)(null),f=Object(i.a)(d,2),h=f[0],j=f[1],O=Object(a.useState)(""),m=Object(i.a)(O,2),x=m[0],y=m[1],w=Object(u.c)(),k=Object(u.d)((function(e){return e.category}));return Object(a.useEffect)((function(){t&&y(t.name)}),[]),Object(A.jsxs)("section",{children:["add"!==o&&h!==t.id?Object(A.jsx)("h2",{className:"cat_title",onClick:function(){j(t.id),n&&n(t)},children:Object(A.jsx)("span",{children:t.name})}):Object(A.jsx)("form",{onSubmit:function(e){e.preventDefault(),t?w(function(e){var t=e.id,n=e.name;return function(){var e=Object(v.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(T({props:"saving",value:!0})),e.next=4,g({url:"/category/".concat(t),data:{name:n}});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0);case 10:return e.prev=10,a(T({props:"saving",value:!1})),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}()}({id:t._id,name:x})).then((function(e){j(null),w(C()),l&&l()})).catch((function(e){})):w(function(e){var t=e.name;return function(){var e=Object(v.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:E,payload:{name:t}}),n(T({props:"saving",value:!0})),e.next=5,b({url:"/category",data:{name:t}});case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(0),Error(e.t0);case 11:return e.prev=11,n(T({props:"saving",value:!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()}({name:x})).then((function(e){w(C()),l&&l()})).catch((function(e){}))},children:Object(A.jsx)(D,{loading:k.saving,onChange:function(e){y(e)},placeholder:"Name your category",onBlur:function(){j(null),s&&s()},value:x})}),r]})};P.proTotype={};var I=n(10),L=function(e){var t=e.width,n=e.height,a=void 0===n?150:n,r=e.goodEvents,c=e.onStop,o=new I.EventStream,s=new I.EventStore;return s.goodEvents=[],r&&(s.goodEvents=r),o.on("stop",(function(){c&&c(s.goodEvents)})),Object(A.jsx)("div",{children:Object(A.jsx)(I.Whiteboard,{style:{backgroundColor:"white"},height:a,width:t,events:o,eventStore:s})})},B=new I.EventStream,U=new I.EventStore,F=function(e){var t=e.task,n=e.onUpdate,r=(e.onDelete,e.onDuplicate,Object(u.c)()),c=Object(a.useState)(!1),o=Object(i.a)(c,2),s=o[0],l=o[1];return U.goodEvents=t.svg_events,Object(A.jsxs)("div",{className:"notes n_card ",style:{},children:[Object(A.jsx)(I.Whiteboard,{style:{backgroundColor:"white"},height:150,events:B,eventStore:U}),Object(A.jsxs)("div",{className:"card_action",children:[Object(A.jsx)("a",{href:"/",disabled:s,className:s?"disabled":"",onClick:function(e){e.preventDefault(),l(!0),r(N({id:t._id,svg_events:t.svg_events,mode:"DUPLICATE"})).then((function(e){r(C())})).catch((function(e){console.log(e)})).finally((function(){l(!1)}))},children:Object(A.jsx)("i",{className:"far fa-copy "+(s?"rotate_":"")})}),Object(A.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),n&&n()},children:Object(A.jsx)("i",{className:"far fa-pen"})}),Object(A.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),r(function(e){var t=e.id;return function(){var e=Object(v.a)(p.a.mark((function e(n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:k,payload:{value:t}}),e.next=4,O({url:"/task/".concat(t)});case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),Error(e.t0);case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}}),e,null,[[0,8,11,13]])})));return function(t){return e.apply(this,arguments)}}()}({id:t._id})).catch((function(){}))},children:Object(A.jsx)("i",{className:"far fa-trash "})})]}),Object(A.jsx)("div",{className:"overlay"})]})},G=function(e){var t=e.children,n=e.onClose,a=e.show,r=void 0!==a&&a,c=e.width,o=void 0===c?500:c,s=e.height,i=void 0===s?500:s,u=e.title,l=e.subTitle,d=e.onSave,p=e.loading,v=void 0!==p&&p,f=e.btnText,h=void 0===f?"Create Task":f;return r?Object(A.jsxs)("div",{children:[Object(A.jsxs)("div",{className:"modal",style:{width:o,height:i},children:[Object(A.jsxs)("div",{className:"title",children:[u?Object(A.jsx)("h1",{className:"",children:u}):null,l?Object(A.jsx)("small",{children:l}):null]}),Object(A.jsx)("div",{className:"modal-body",children:t}),Object(A.jsx)("div",{className:"modal-action",children:Object(A.jsxs)("div",{className:"task_act_button",children:[Object(A.jsx)("button",{disabled:v,className:"btn btn-primary ".concat(v?"disabled":""),type:"submit",onClick:function(){d&&d()},children:v?"Saving...":h}),"\xa0\xa0",Object(A.jsx)("button",{type:"button",className:"btn",onClick:function(){n&&n()},children:"Cancel"})]})})]}),Object(A.jsx)("div",{className:"bg",onClick:function(e){e.preventDefault(),n&&n()}})]}):null},M=[],Y=function(e){var t=e.onClose,n=e.height,a=void 0===n?440:n,r=e.category,c=e.show,o=e.mode,s=void 0===o?"CREATE":o,i=e.selectedTask,l=Object(u.c)(),d=Object(u.d)((function(e){return e.task})),f='Add New Task "'.concat(r?r.name:"",'"'),h=null;return i&&(f="CREATE"===s?'Update Task "'.concat(r?r.name:"",'"'):'Duplicate Task "'.concat(r?r.name:"",'"'),h=i.svg_events,M=i.svg_events),console.log(c),Object(A.jsxs)(G,{btnText:i?"CREATE"===s?"Update Task":"Duplicate Task":"Create Task",loading:d.saving,onSave:function(){M&&M.length&&(i?l(N({svg_events:M,id:i._id,mode:s})).then((function(e){l(C()),t()})).catch((function(e){console.log(e)})):l(function(e){var t=e.category,n=e.svg_events;return function(){var e=Object(v.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(S({props:"saving",value:!0})),e.next=4,b({url:"/task",data:{category:t,svg_events:n}});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0);case 10:return e.prev=10,a(S({props:"saving",value:!1})),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}()}({svg_events:M,category:r._id})).then((function(e){l(C()),M=[],t()})).catch((function(e){console.log(e)})))},height:a,subTitle:"Draw on the white board to and create a new task.",title:f,onClose:function(){t&&t()},show:c,children:[Object(A.jsx)(L,{goodEvents:h,onStop:function(e){M=e},height:220,width:500}),Object(A.jsx)("p",{style:{color:"#999"},children:Object(A.jsx)("small",{children:"Click and move your mouse to start drawing"})})]})};var K=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(i.a)(c,2),d=o[0],f=o[1],h=Object(a.useState)("CREATE"),j=Object(i.a)(h,2),b=j[0],m=j[1],x=Object(a.useState)(!1),w=Object(i.a)(x,2),k=w[0],E=w[1],_=Object(u.c)(),S=Object(u.d)((function(e){return e.category}));return Object(a.useEffect)((function(){_(C()).catch((function(e){}))}),[]),Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(l.a,{onDragEnd:function(e){var t=e.destination,n=e.source,a=e.draggableId;_(function(e){var t=e.destination,n=e.id,a=e.source;return function(){var e=Object(v.a)(p.a.mark((function e(r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t!==a){e.next=3;break}return e.abrupt("return");case 3:if(t){e.next=5;break}return e.abrupt("return");case 5:return r({type:y,payload:{destination:t,source:a,id:n}}),e.next=8,g({url:"/task/reorder/".concat(n),data:{category:t}}).catch((function(e){console.log(e)}));case 8:return c=e.sent,r(C(!1)),e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(0),Error(e.t0);case 16:return e.prev=16,e.finish(16);case 18:case"end":return e.stop()}}),e,null,[[0,13,16,18]])})));return function(t){return e.apply(this,arguments)}}()}({destination:t.droppableId,id:a,source:n.droppableId}))},children:S.data.map((function(e,t){return Object(A.jsx)(l.c,{droppableId:String(e._id),children:function(n){return Object(A.jsx)("section",Object(s.a)(Object(s.a)({className:"category_iterator"},n.droppableProps),{},{ref:n.innerRef,children:Object(A.jsxs)(P,{selectCategory:function(e){},category:e,children:[e.tasks?e.tasks.map((function(n,a){return Object(A.jsx)(l.b,{index:a,draggableId:String(n._id),children:function(t){return Object(A.jsx)("div",Object(s.a)(Object(s.a)(Object(s.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:Object(A.jsx)(F,{onUpdate:function(){f(n),r(e)},onDuplicate:function(){f(n),r(e),m("DUPLICATE")},task:n},a)}))}},a+t)})):null,n.placeholder,Object(A.jsxs)("div",{onClick:function(){e.static||S.fetching||(f(null),r(e))},className:"action_add action_add_item",children:[Object(A.jsx)("i",{className:"fas fa-plus-circle"})," \xa0Add New Task.."]})]},t)}))}},t)}))}),k?Object(A.jsx)("section",{className:"category_iterator",children:Object(A.jsx)(P,{onSave:function(){E(!1)},onBlur:function(){E(!1)},mode:"add"})}):Object(A.jsxs)("section",{style:{marginRight:40},onClick:function(){E(!0)},className:"action_add action_add_category",children:[Object(A.jsx)("i",{className:"fas fa-plus-circle"})," \xa0Add New Category"]}),Object(A.jsx)(Y,{mode:b,selectedTask:d,show:null!==n,category:n,onClose:function(){r(null),f(null)}}),S.data.length>0?Object(A.jsxs)("div",{className:"downloder",children:[Object(A.jsx)("button",{onClick:function(){window.location.href="/api/category/download"},children:"Download"}),Object(A.jsx)("button",{onClick:function(){_(function(){var e=Object(v.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(T({props:"data",value:[]})),e.next=4,O({url:"/category/flush-record"});case 4:return n=e.sent,t(C()),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0);case 12:return e.prev=12,t(T({props:"saving",value:!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:"Flush Records"})]}):null]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},W=n(6),H=n(27),X={saving:!1,data:[],fetching:!1},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.payload.deep?e[t.payload.props][t.payload.deep]=t.payload.value:e[t.payload.props]=t.payload.value,Object(s.a)({},e);case E:return e.data.push({name:t.payload.name,tasks:[],_id:m(10),static:!0}),Object(s.a)({},e);case y:var n={};return e.data.map((function(e){return e.tasks=e.tasks.filter((function(e){if(e._id!==t.payload.id)return e;n=e})),e})),e.data.map((function(e){return e._id===t.payload.destination&&e.tasks.push(n),e})),Object(s.a)({},e);case w:return e.data.map((function(e){return e.tasks=e.tasks.map((function(e){return e._id===t.payload.id&&(e.svg_events=t.payload.svg_events),e})),e})),Object(s.a)({},e);case k:var a=null,r=null;try{e.data.map((function(e,n){a=n,e.tasks.map((function(e,n){if(e._id===t.payload.value)throw r=n,Error("stop")}))}))}catch(c){}return null!==a&&null!==r&&e.data[a]&&e.data[a].tasks.splice(r,1),Object(s.a)({},e);default:return Object(s.a)({},e)}},z={saving:!1,data:[]},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return t.payload.deep?e[t.payload.props][t.payload.deep]=t.payload.value:e[t.payload.props]=t.payload.value,Object(s.a)({},e);default:return Object(s.a)({},e)}},V=Object(W.c)({category:q,task:Q}),Z=Object(W.e)(V,Object(W.d)(Object(W.a)(H.a)));o.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(u.a,{store:Z,children:Object(A.jsx)(K,{})})}),document.getElementById("root")),J()}},[[61,1,2]]]);
//# sourceMappingURL=main.aa5e7201.chunk.js.map