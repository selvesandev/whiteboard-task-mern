(this["webpackJsonpwhiteboard-task-mern"]=this["webpackJsonpwhiteboard-task-mern"]||[]).push([[0],{32:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=n.n(c),s=(n(32),n(5)),i=n(9),u=n(3),d=n(13),l=n(4),p=n.n(l),v=n(8),f=n(11),h=n.n(f);h.a.defaults.baseURL="/api",h.a.defaults.headers.post["Content-Type"]="application/json",h.a.interceptors.response.use((function(e){return e}),(function(e){return e.response&&e.response.data&&e.response.status,Promise.reject(e)}));var j=function(e){var t=e.url,n=e.params;return new Promise((function(e,a){var r={method:"GET",url:t,params:n};return e(h()(r))}))},b=function(e){var t=e.url,n=e.data,a=e.params;return new Promise((function(e,r){var c={method:"POST",url:t,data:n,params:a,headers:{}};return e(h()(c))}))},g=function(e){var t=e.url,n=e.data,a=e.params;return new Promise((function(e,r){var c={method:"PUT",url:t,data:n,params:a,headers:{}};return e(h()(c))}))},O=function(e){var t=e.url,n=e.data,a=e.params,r=void 0===a?{}:a;return new Promise((function(e,a){var c={method:"DELETE",url:t,data:n,params:r,headers:{}};return e(h()(c))}))},m=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*a));return t},y="CATEOGRY_GENERAL_STATE",x="CATEGORY_TASK_REORDER_STATIC",_="CATEGORY_TASK_UPDATE_STATIC",w="CATEGORY_TASK_DELETE_STATIC",k="CATEGORY_CREATE_STATIC",E="CATEGORY_TASK_STATIC",T="TASK_GENERAL_STATE",C=function(e){var t=e.props,n=e.value,a=e.deep;return{type:y,payload:{props:t,value:n,deep:a}}},S=function(){return function(){var e=Object(v.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(C({props:"fetching",value:!0})),e.next=4,j({url:"/category"});case 4:n=e.sent,t(C({props:"data",value:n.data.data})),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),Error(e.t0);case 11:return e.prev=11,t(C({props:"fetching",value:!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()},N=function(e){var t=e.props,n=e.value,a=e.deep;return{type:T,payload:{props:t,value:n,deep:a}}},A=function(e){var t=e.id,n=e.svg_events,a=e.mode,r=void 0===a?"CREATE":a,c=e.category;return function(){var e=Object(v.a)(p.a.mark((function e(a){var o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(N({props:"saving",value:!0})),e.next=4,g({url:"/task/".concat(t),data:{svg_events:n,category:c},params:{mode:r}});case 4:return o=e.sent,a({type:_,payload:{id:o.data.data._id,svg_events:n,mode:r,category:c}}),e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0);case 12:return e.prev=12,a(N({props:"saving",value:!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}()},D=n(1),R=function(e){var t=e.height,n=void 0===t?100:t,a=e.width,r=void 0===a?100:a,c=e.color,o=void 0===c?"#fff":c,s=e.isFullScreen,i=void 0!==s&&s;return Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"loader "+(i?"full_screen":""),children:Object(D.jsx)("svg",{style:{width:r,height:n},version:"1.1",id:"L9",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",children:Object(D.jsx)("path",{fill:o,d:"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50",children:Object(D.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})})})}),i?Object(D.jsx)("div",{className:"bg",onClick:function(e){}}):null]})},I=function(e){var t=e.value,n=e.onBlur,a=e.placeholder,r=e.onChange,c=e.loading;return Object(D.jsxs)("div",{className:"input_container",children:[Object(D.jsx)("input",{type:"text",className:"input_element",placeholder:a,autoFocus:!0,onFocus:function(e){e.target.select()},value:t,onBlur:n,onChange:function(e){r&&r(e.target.value)}}),c?Object(D.jsx)(R,{height:40,width:40,color:"#4caf50"}):null]})},P=function(e){var t=e.category,n=e.selectCategory,r=e.children,c=e.mode,o=void 0===c?"edit":c,s=e.onBlur,d=e.onSave,l=Object(a.useState)(null),f=Object(i.a)(l,2),h=f[0],j=f[1],O=Object(a.useState)(""),m=Object(i.a)(O,2),y=m[0],x=m[1],_=Object(u.c)(),w=Object(u.d)((function(e){return e.category}));return Object(a.useEffect)((function(){t&&x(t.name)}),[t]),Object(D.jsxs)("section",{children:["add"!==o&&h!==t.id?Object(D.jsx)("h2",{className:"cat_title",onClick:function(){j(t.id),n&&n(t)},children:Object(D.jsx)("span",{children:y})}):Object(D.jsx)("form",{onSubmit:function(e){e.preventDefault(),t?(_(function(e){var t=e.id,n=e.name;return function(){var e=Object(v.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(C({props:"saving",value:!0})),e.next=4,g({url:"/category/".concat(t),data:{name:n}});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0);case 10:return e.prev=10,a(C({props:"saving",value:!1})),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}()}({id:t._id,name:y})).then((function(e){_(S()),d&&d()})).catch((function(e){})),j(null)):(_(function(e){var t=e.name;return function(){var e=Object(v.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:k,payload:{name:t}}),n(C({props:"saving",value:!0})),e.next=5,b({url:"/category",data:{name:t}});case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(0),Error(e.t0);case 11:return e.prev=11,n(C({props:"saving",value:!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()}({name:y})).then((function(e){_(S())})).catch((function(e){})),d&&d())},children:Object(D.jsx)(I,{loading:w.saving,onChange:function(e){x(e)},placeholder:"Name your category",onBlur:function(){j(null),s&&s()},value:y})}),Object(D.jsx)("div",{className:"category_card_container",children:r})]})};P.proTotype={};var L=n(10),U=new L.EventStream,B=new L.EventStore,G=function(e){var t=e.task,n=e.onUpdate,r=(e.onDelete,e.onDuplicate,Object(u.c)()),c=Object(a.useState)(!1),o=Object(i.a)(c,2),s=o[0],d=o[1],l=Object(u.d)((function(e){return e.task}));return B.goodEvents=t.svg_events,Object(D.jsxs)("div",{className:"notes n_card ",style:{},children:[Object(D.jsx)(L.Whiteboard,{style:{backgroundColor:"white"},height:150,events:U,eventStore:B}),Object(D.jsxs)("div",{className:"card_action",children:[Object(D.jsx)("a",{href:"/",disabled:s,className:s?"disabled":"",onClick:function(e){e.preventDefault(),t.static||(d(!0),r(A({id:t._id,svg_events:t.svg_events,mode:"DUPLICATE",category:t.category})).then((function(e){r(S()).catch((function(){})).finally((function(){d(!1)}))})).catch((function(e){})).finally((function(){})))},children:Object(D.jsx)("i",{className:"far fa-copy "+(s?"rotate_":"")})}),Object(D.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),t.static||l.ordering||n&&n()},children:Object(D.jsx)("i",{className:"far fa-pen"})}),Object(D.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),t.static||r(function(e){var t=e.id;return function(){var e=Object(v.a)(p.a.mark((function e(n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:w,payload:{value:t}}),e.next=4,O({url:"/task/".concat(t)});case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),Error(e.t0);case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}}),e,null,[[0,8,11,13]])})));return function(t){return e.apply(this,arguments)}}()}({id:t._id})).catch((function(){}))},children:Object(D.jsx)("i",{className:"far fa-trash "})})]}),Object(D.jsx)("div",{className:"overlay"})]})},F=function(e){var t=e.width,n=e.height,a=void 0===n?150:n,r=e.goodEvents,c=e.onStop,o=new L.EventStream,s=new L.EventStore;return s.goodEvents=[],r&&(s.goodEvents=r),o.on("stop",(function(){c&&c(s.goodEvents)})),Object(D.jsx)("div",{children:Object(D.jsx)(L.Whiteboard,{style:{backgroundColor:"white"},height:a,width:t,events:o,eventStore:s})})},M=function(e){var t=e.children,n=e.onClose,a=e.show,r=void 0!==a&&a,c=e.width,o=void 0===c?500:c,s=e.height,i=void 0===s?500:s,u=e.title,d=e.subTitle,l=e.onSave,p=e.loading,v=void 0!==p&&p,f=e.btnText,h=void 0===f?"Create Task":f;return r?Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"modal",style:{width:o,height:i},children:[Object(D.jsxs)("div",{className:"title",children:[u?Object(D.jsx)("h1",{className:"",children:u}):null,d?Object(D.jsx)("small",{children:d}):null]}),Object(D.jsx)("div",{className:"modal-body",children:t}),Object(D.jsx)("div",{className:"modal-action",children:Object(D.jsxs)("div",{className:"task_act_button",children:[Object(D.jsx)("button",{disabled:v,className:"btn btn-primary ".concat(v?"disabled":""),type:"submit",onClick:function(){l&&l()},children:v?"Saving...":h}),"\xa0\xa0",Object(D.jsx)("button",{type:"button",className:"btn",onClick:function(){n&&n()},children:"Cancel"})]})})]}),Object(D.jsx)("div",{className:"bg",onClick:function(e){e.preventDefault(),n&&n()}})]}):null},Y=[],K=function(e){var t=e.onClose,n=e.height,a=void 0===n?440:n,r=e.category,c=e.show,o=e.mode,s=void 0===o?"CREATE":o,i=e.selectedTask,d=Object(u.c)(),l=Object(u.d)((function(e){return e.task})),f='Add New Task "'.concat(r?r.name:"",'"'),h=null;return i&&(f="CREATE"===s?'Update Task "'.concat(r?r.name:"",'"'):'Duplicate Task "'.concat(r?r.name:"",'"'),h=i.svg_events,Y=i.svg_events),Object(D.jsxs)(M,{btnText:i?"CREATE"===s?"Update Task":"Duplicate Task":"Create Task",loading:l.saving,onSave:function(){Y&&Y.length&&(i?d(A({svg_events:Y,id:i._id,mode:s})).then((function(e){t()})).catch((function(e){console.log(e)})):d(function(e){var t=e.category,n=e.svg_events;return function(){var e=Object(v.a)(p.a.mark((function e(a){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(N({props:"saving",value:!0})),e.next=4,b({url:"/task",data:{category:t,svg_events:n}});case 4:r=e.sent,a({type:E,payload:{category:t,svg_events:n,id:r.data.data._id}}),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),Error(e.t0);case 11:return e.prev=11,a(N({props:"saving",value:!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()}({svg_events:Y,category:r._id})).then((function(e){Y=[],t()})).catch((function(e){console.log(e)})))},height:a,subTitle:"Draw on the white board to and create a new task.",title:f,onClose:function(){t&&t()},show:c,children:[Object(D.jsx)(F,{goodEvents:h,onStop:function(e){Y=e},height:220,width:500}),Object(D.jsx)("p",{style:{color:"#999"},children:Object(D.jsx)("small",{children:"Click and move your mouse to start drawing"})})]})},J=function(){var e=Object(u.c)();return Object(D.jsxs)("div",{className:"downloder",children:[Object(D.jsx)("button",{onClick:function(){window.location.href="/api/category/download"},children:"Download"}),Object(D.jsx)("button",{onClick:function(){e(function(){var e=Object(v.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(C({props:"data",value:[]})),e.next=4,O({url:"/category/flush-record"});case 4:return n=e.sent,t(S()),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0);case 12:return e.prev=12,t(C({props:"saving",value:!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:"Flush Records"})]})};var W=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(i.a)(c,2),l=o[0],f=o[1],h=Object(a.useState)("CREATE"),j=Object(i.a)(h,2),b=j[0],O=j[1],m=Object(a.useState)(!1),y=Object(i.a)(m,2),_=y[0],w=y[1],k=Object(u.c)(),E=Object(u.d)((function(e){return e.category}));return Object(a.useEffect)((function(){k(S()).catch((function(e){}))}),[k]),Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(d.a,{onDragEnd:function(e){var t=e.destination,n=e.source,a=e.draggableId;t&&(t.droppableId===n.droppableId&&t.index===n.index||k(function(e){var t=e.destination,n=e.id,a=e.source;return e.sourceIndex,e.destinationIndex,function(){var e=Object(v.a)(p.a.mark((function e(r,c){var o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t!==a){e.next=3;break}return e.abrupt("return");case 3:return r({type:x,payload:{destination:t,source:a,id:n}}),o=c().category.lastSavedOrder,r(N({props:"ordering",value:!0})),e.next=8,g({url:"/task/reorder/".concat(o.id),data:{category:o.destination}}).catch((function(e){console.log(e)}));case 8:return s=e.sent,e.abrupt("return",s);case 12:throw e.prev=12,e.t0=e.catch(0),Error(e.t0);case 15:return e.prev=15,r(N({props:"ordering",value:!1})),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()}({destination:t.droppableId,id:a,source:n.droppableId,sourceIndex:n.index,destinationIndex:t.index})))},children:E.data.map((function(e,t){return Object(D.jsx)(d.c,{droppableId:String(e._id),children:function(n,a){return Object(D.jsx)("section",Object(s.a)(Object(s.a)({className:"category_iterator "+(a.isDraggingOver?"dragging_over":"")},n.droppableProps),{},{ref:n.innerRef,children:Object(D.jsxs)(P,{category:e,children:[e.tasks?e.tasks.map((function(t,n){return Object(D.jsx)(d.b,{index:n,draggableId:String(t._id),children:function(a,c){return Object(D.jsx)("div",Object(s.a)(Object(s.a)(Object(s.a)({ref:a.innerRef,className:c.isDragging?"is_dragging":""},a.draggableProps),a.dragHandleProps),{},{children:Object(D.jsx)(G,{onUpdate:function(){f(t),r(e)},onDuplicate:function(){f(t),r(e),O("DUPLICATE")},task:t},n)}))}},t._id)})):null,n.placeholder,Object(D.jsxs)("div",{onClick:function(){e.static||(f(null),r(e))},className:"action_add action_add_item",children:[Object(D.jsx)("i",{className:"fas fa-plus-circle"})," \xa0Add New Task.."]})]},t)}))}},e._id)}))}),_?Object(D.jsx)("section",{className:"category_iterator",children:Object(D.jsx)(P,{onSave:function(){w(!1)},onBlur:function(){w(!1)},mode:"add"})}):Object(D.jsxs)("section",{style:{marginRight:40},onClick:function(){w(!0)},className:"action_add action_add_category",children:[Object(D.jsx)("i",{className:"fas fa-plus-circle"})," \xa0Add New Category"]}),Object(D.jsx)(K,{mode:b,selectedTask:l,show:null!==n,category:n,onClose:function(){r(null),f(null)}}),E.data.length>0?Object(D.jsx)(J,{}):null]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},X=n(6),q=n(27),z={saving:!1,data:[],fetching:!1,lastSavedOrder:{destination:"",id:"",source:""}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;function n(t){var n=null;try{e.data.map((function(e){return e.tasks.map((function(e){if(e._id===t)throw n=e,Error("");return e})),e}))}catch(a){}return n}switch(t.type){case y:return t.payload.deep?e[t.payload.props][t.payload.deep]=t.payload.value:e[t.payload.props]=t.payload.value,Object(s.a)({},e);case k:return e.data.push({name:t.payload.name,tasks:[],_id:m(10),static:!0}),Object(s.a)({},e);case x:var a=n(t.payload.id);return e.data.map((function(e){return e.tasks=e.tasks.filter((function(e){return e._id!==t.payload.id})),e})),e.data=e.data.map((function(e){return e._id===t.payload.destination&&(a&&(a.category=t.payload.destination),e.tasks.push(a)),e})),e.lastSavedOrder=t.payload,Object(s.a)({},e);case _:return"DUPLICATE"===t.payload.mode&&e.data.map((function(e){return e.tasks=e.tasks.map((function(e){return e._id===t.payload.id&&(e.svg_events=t.payload.svg_events),e})),e})),Object(s.a)({},e);case E:return e.data.map((function(e){if(e._id===t.payload.category){var n=!1,a=m(10);t.payload.id&&(a=t.payload.id,n=!1),e.tasks.push({_id:a,svg_events:t.payload.svg_events,category:t.payload.category,static:n})}return e})),Object(s.a)({},e);case w:var r=null,c=null;try{e.data.map((function(e,n){return r=n,e.tasks.map((function(e,n){if(e._id===t.payload.value)throw c=n,Error("stop");return e})),e}))}catch(o){}return null!==r&&null!==c&&e.data[r]&&e.data[r].tasks.splice(c,1),Object(s.a)({},e);default:return Object(s.a)({},e)}},V={saving:!1,data:[],ordering:!1},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return t.payload.deep?e[t.payload.props][t.payload.deep]=t.payload.value:e[t.payload.props]=t.payload.value,Object(s.a)({},e);default:return Object(s.a)({},e)}},$=Object(X.c)({category:Q,task:Z}),ee=Object(X.e)($,Object(X.d)(Object(X.a)(q.a)));o.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(u.a,{store:ee,children:Object(D.jsx)(W,{})})}),document.getElementById("root")),H()}},[[61,1,2]]]);
//# sourceMappingURL=main.e7cb82c0.chunk.js.map